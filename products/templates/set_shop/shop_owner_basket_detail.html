{% extends "class_base.html" %}

{% load static %}

{% block content %}
    <div class="col-md-12">
        <div class="row" style="height: 100%;">
            <div class="col-md-6">
                {% if post.image %}
                    <img src="{{post.image.url}}" alt="image_of_post" style="width: 400px; height: 400px; border: solid red;">
                {% else %}
                    <img src="{% static 'download.jpeg' %}" alt="image_of_post" style=" border: solid red;">
                {% endif %}
            </div>
            <div class="col-md-6">
                <h1>shop name : {{post.name}}</h1>
            </div>
        </div>
    </div>

    <hr>
    <div class="col-md-12">
        <div class="row" style="height: 100%;">
            <div class="col-md-4">
                <small>tags :</small>
                {% for t in post.tag.all  %}
                    <p>{{t}}</p>
                {% endfor %}
            </div>

            <div class="col-md-4">
                categorys :
                {% for t in post.category.all  %}
                    <a href="/class_category_detail/{{t.id}}">{{t}}</a>-
                {% endfor %}
            </div>

            <div class="col-md-4">
                <h5>status : {{post.status}}</h5>
            </div>
        </div>
    </div>
    <hr>

    <div class="col-md-12 box-shadow">
        <div class="row" style="height: 100%;">
            <h1>Basket Info :</h1>
            <div class="col-md-6">
                <p>
                    basket id : {{basket.id}}
                </p>
                <p>
                    bought by :
                    {% if basket.owner.username %}
                        <a class="btn btn-sm btn-primary" href="/user/{{basket.owner.username}}">
                            {{basket.owner.username}}
                        </a> 
                    {% else %}
                        <a class="btn btn-sm btn-primary" href="/user/{{basket.owner.username}}">
                            {{basket.owner.mobile}}
                        </a>   
                    {% endif %}
                    {% if customer.first_name %}
                        <p>
                            first name : {{customer.first_name}}
                        </p>
                    {% endif %}
                    {% if customer.last_name %}
                        <p>
                            first name : {{customer.last_name}}
                        </p>
                    {% endif %}
                </p>
                <p>
                    bought at : {{basket.Chekedout_date}}
                </p>
                <p>
                    Total amount of ptoduct from your shop : {{sells.count}}
                </p>
            </div>
            <div class="col-md-6">
                <p>
                    Address :
                </p>
                <p>
                    {{basket.address.country}}-{{basket.address.city}}
                </p>
                <p>
                    {{basket.address.street}}-{{basket.address.alley}}
                </p>
                <p>
                    pelak : {{basket.address.number}} - code post : {{basket.address.zip}}
                </p>
                {% if basket.address.desc %}
                    <p>
                        tozihe address : {{basket.address.desc}}
                    </p>              
                {% endif %}
            </div>
        </div>
    </div>
    <hr>

    <h1 style="color: rgb(218, 215, 33);">LOAD :</h1>

    <div class="col-md-12 ">
        <div class="row mt-1 g-3 btn-light " style="height: 100%;">
            <p style="justify-content: center;" >live products :</p>
            {% for sell in sells %}
                {% if sell.status == 'load' %}
                    <div class="col-md-3 " style="height: auto; ">
                        <div class="card h-100" style="border: solid rgb(18, 238, 73);">
                            <div style="justify-content: center;"> 
                                {% if sell.product.image %}
                                    <img src="{{sell.product.image.url}}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red; margin-top: 5px;">
                                {% else %}
                                    <img src="{% static 'download.jpeg' %}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red;margin-top: 5px;">
                                {% endif %}
                            </div>
                            <br>
                            <h1>{{sell.product.name}}</h1>
                            <small>quantity : {{sell.quantity}}</small>
                            <small>{{sell.basket.order_date | date}}</small>
                            <small>
                                {% if sell.basket.owner.username %}
                                    bought by :
                                    <a class="btn btn-sm btn-primary" href="/user/{{sell.basket.owner.username}}">
                                        {{sell.basket.owner.username}}
                                    </a>                               
                                {% else %}
                                    bought by :
                                    <a class="btn btn-sm btn-primary" href="/user/{{sell.basket.owner.username}}">
                                        {{sell.basket.owner.mobile}}
                                    </a>
                                {% endif %}
                            </small>
                            <small , style="border: solid rgb(94, 47, 202);">{{sell.status}}</small>
                            <small>
                                <p>
                                        <a href="/onlineshop/product_detail/{{sell.product.id}}">show detail</a>
                                    <br>
                                        <a href="class_category_posts/gslug/{{product.slug}}">show detail via SLUG </a>
                                </p>
                            </small>
                            <hr>
                            <a class="btn btn-sm btn-primary" href="/onlineshop/edit_item_status/{{sell.id}}">
                                <small>Edit status</small>
                            </a>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <h1 style="color: rgb(218, 70, 33);">CANCELED :</h1>
    <div class="col-md-12 ">
        <div class="row mt-1 g-3 btn-light " style="height: 100%;">
            <p style="justify-content: center;" >canceled products :</p>
            {% for sell in sells %}
                {% if sell.status == 'canc' %}
                    <div class="col-md-3 " style="height: auto; ">
                        <div class="card h-100" style="border: solid rgb(157, 194, 194);">
                            <div style="justify-content: center;"> 
                                {% if sell.product.image %}
                                    <img src="{{sell.product.image.url}}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red; margin-top: 5px;">
                                {% else %}
                                    <img src="{% static 'download.jpeg' %}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red;margin-top: 5px;">
                                {% endif %}
                            </div>
                            <br>
                            <h1>{{sell.product.name}}</h1>
                            <small>quantity : {{sell.quantity}}</small>
                            <small>{{sell.basket.order_date | date}}</small>
                            <small , style="border: solid rgb(94, 47, 202);">{{sell.status}}</small>
                            <small>
                                <p>
                                        <a href="/onlineshop/product_detail/{{sell.product.id}}">show detail</a>
                                    <br>
                                        <a href="class_category_posts/gslug/{{product.slug}}">show detail via SLUG </a>
                                </p>
                            </small>
                            {% if sell.desc %}
                                <button id="myBtn">توضیحات خریدار</button>
                                <!-- The Modal -->
                                <div id="myModal" class="modal">
                                <!-- Modal content -->
                                <div class="modal-content">
                                    <span class="close">&times;</span>
                                    <p>{{sell.desc}}</p>
                                </div>
                                
                                </div>
                            {% endif %}
                            <hr>
                            <a class="btn btn-sm btn-primary" href="/onlineshop/edit_item_status/{{sell.id}}">
                                <small>Edit status</small>
                            </a>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <h1 style="color: rgb(92, 218, 33);">COMPLETED :</h1>
    <div class="col-md-12 ">
        <div class="row mt-1 g-3 btn-light " style="height: 100%;">
            <p style="justify-content: center;" >successfuly completed products :</p>
            {% for sell in sells %}
                {% if sell.status == 'done' %}
                    <div class="col-md-3 " style="height: auto; ">
                        <div class="card h-100" style="border: solid rgb(157, 194, 194);">
                            <div style="justify-content: center;"> 
                                {% if sell.product.image %}
                                    <img src="{{sell.product.image.url}}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red; margin-top: 5px;">
                                {% else %}
                                    <img src="{% static 'download.jpeg' %}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red;margin-top: 5px;">
                                {% endif %}
                            </div>
                            <br>
                            <h1>{{sell.product.name}}</h1>
                            <small>quantity : {{sell.quantity}}</small>
                            <small>{{sell.basket.order_date | date}}</small>
                            <small , style="border: solid rgb(94, 47, 202);">{{sell.status}}</small>
                            <small>
                                <p>
                                        <a href="/onlineshop/product_detail/{{sell.product.id}}">show detail</a>
                                    <br>
                                        <a href="class_category_posts/gslug/{{product.slug}}">show detail via SLUG </a>
                                </p>
                            </small>
                            <hr>
                            <a class="btn btn-sm btn-primary" href="/onlineshop/edit_item_status/{{sell.id}}">
                                <small>Edit status</small>
                            </a>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <hr>

    <style>
        .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* 15% from the top and centered */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Could be more or less, depending on screen size */
        }

        /* The Close Button */
        .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        }

        .close:hover,
        .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
        }
        .box-shadow {
        font-family: cursive, sans-serif;
        background-color: #2ecc71;
        color: white;
        padding: 10px;
        border-radius: 4px;
        box-shadow: 2px 2px 20px 23px #7fecad;
        }
    </style>

    <script>
        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on the button, open the modal
        btn.onclick = function() {
        modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
        }
    </script>

{% endblock content %}